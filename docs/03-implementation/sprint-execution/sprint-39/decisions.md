# Sprint 39 Technical Decisions: MCP Core Framework

## 決策記錄

| ID | 決策 | 日期 | 狀態 |
|----|------|------|------|
| D39-1 | 採用 JSON-RPC 2.0 作為 MCP 協議基礎 | 2025-12-22 | ✅ 已採納 |
| D39-2 | 使用 stdio 作為主要傳輸層 | 2025-12-22 | ✅ 已採納 |
| D39-3 | 實現 RBAC 權限模型 | 2025-12-22 | ✅ 已採納 |
| D39-4 | 使用 YAML 作為伺服器配置格式 | 2025-12-22 | ✅ 已採納 |

---

## 決策詳情

### D39-1: 採用 JSON-RPC 2.0 作為 MCP 協議基礎

**背景**: 需要選擇 MCP 的通訊協議格式

**選項**:
1. JSON-RPC 2.0 - 標準化、簡單、廣泛支援
2. gRPC - 高性能但複雜度較高
3. 自定義協議 - 靈活但需額外維護

**決策**: 採用 JSON-RPC 2.0

**理由**:
- 與 MCP 規範一致
- 簡單的請求/回應模型
- 良好的錯誤處理機制
- 易於調試和測試

---

### D39-2: 使用 stdio 作為主要傳輸層

**背景**: 需要確定 MCP Server 與 Client 之間的通訊方式

**選項**:
1. stdio (stdin/stdout) - 子程序通訊
2. HTTP/WebSocket - 網路通訊
3. Unix Socket - 本地通訊

**決策**: 使用 stdio 作為主要傳輸層

**理由**:
- MCP 規範的標準傳輸方式
- 簡單可靠的程序間通訊
- 無需網路設置
- 易於在容器環境中使用

---

### D39-3: 實現 RBAC 權限模型

**背景**: 需要控制工具的存取權限

**選項**:
1. 簡單的開/關控制
2. RBAC (Role-Based Access Control)
3. ABAC (Attribute-Based Access Control)

**決策**: 實現 RBAC 權限模型

**理由**:
- 適合企業環境的權限管理
- 支援角色繼承和權限聚合
- 易於理解和維護
- 可擴展支援更複雜的策略

---

### D39-4: 使用 YAML 作為伺服器配置格式

**背景**: 需要選擇 MCP Server 配置文件格式

**選項**:
1. YAML - 可讀性好
2. JSON - 通用性強
3. TOML - 結構清晰

**決策**: 使用 YAML 格式

**理由**:
- 更好的可讀性
- 支援註解
- 易於人工編輯
- 與其他配置文件保持一致

---

**創建日期**: 2025-12-22
**更新日期**: 2025-12-22
