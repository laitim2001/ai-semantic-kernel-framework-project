# Sprint 102 決策記錄

## 概述

記錄 Sprint 102 開發過程中的重要技術決策和設計選擇。

---

## 決策 1: 組件架構設計

**日期**: 2026-01-29
**狀態**: 已決定

### 背景
需要決定 Agent Swarm 可視化組件的架構方式。

### 選項
1. **單一大組件**: 所有功能在一個組件中
2. **拆分子組件**: 將面板拆分為多個獨立子組件

### 決定
選擇 **選項 2: 拆分子組件**

### 理由
- 遵循單一職責原則
- 便於單元測試
- 支援組件復用
- 便於維護和擴展

### 組件結構
```
AgentSwarmPanel
├── SwarmHeader
├── OverallProgress
├── WorkerCardList
│   └── WorkerCard (多個)
└── SwarmStatusBadges (可選)
```

---

## 決策 2: 類型定義策略

**日期**: 2026-01-29
**狀態**: 已決定

### 背景
需要決定前端類型定義與後端 API 的對應方式。

### 決定
- 使用 **camelCase** 命名（前端標準）
- 定義 **WorkerSummary** 用於卡片顯示（輕量）
- 定義 **WorkerDetail** 用於詳情抽屜（完整）
- 類型定義與後端 API 響應格式保持語義一致

### 類型映射
| 後端 (snake_case) | 前端 (camelCase) |
|-------------------|------------------|
| `worker_id` | `workerId` |
| `worker_name` | `workerName` |
| `worker_type` | `workerType` |
| `tool_calls_count` | `toolCallsCount` |

---

## 決策 3: 狀態顏色系統

**日期**: 2026-01-29
**狀態**: 已決定

### 背景
需要統一各種狀態的視覺表示。

### 決定
採用以下顏色系統：

| 狀態 | 顏色 | Tailwind Class |
|------|------|----------------|
| pending | 灰色 | `text-gray-500` |
| running | 藍色 | `text-blue-500` |
| paused | 黃色 | `text-yellow-500` |
| completed | 綠色 | `text-green-500` |
| failed | 紅色 | `text-red-500` |

### 理由
- 與業界標準一致
- 色彩語義清晰
- 符合無障礙設計原則

---

## 決策 4: 圖標庫選擇

**日期**: 2026-01-29
**狀態**: 已決定

### 背景
需要選擇組件使用的圖標庫。

### 選項
1. Lucide React (專案已使用)
2. Heroicons
3. FontAwesome

### 決定
選擇 **Lucide React**

### 理由
- 專案已經在使用
- 與 Shadcn UI 兼容
- 圖標風格一致
- 檔案大小小（tree-shakable）

---

## 決策 5: 進度動畫策略

**日期**: 2026-01-29
**狀態**: 已決定

### 背景
需要決定進度條和狀態更新的動畫效果。

### 決定
- 進度條使用 CSS `transition` 平滑過渡
- 執行中狀態使用 `animate-pulse` 提示活動
- 狀態切換使用 `transition-all` 平滑過渡

### 理由
- 使用 Tailwind 內建動畫，保持一致性
- 避免過度動畫影響性能
- 提供足夠視覺反饋但不分散注意力

---

## 待決定事項

### 問題 1: 虛擬化列表
- **狀態**: 延遲決定
- **背景**: 當 Worker 數量很多時是否需要虛擬化
- **暫定方案**: 先使用 ScrollArea，若遇性能問題再引入虛擬化

### 問題 2: Worker 排序
- **狀態**: 延遲決定
- **選項**: 按索引、按狀態、按創建時間
- **暫定方案**: 按後端返回順序顯示

---

**最後更新**: 2026-01-29
