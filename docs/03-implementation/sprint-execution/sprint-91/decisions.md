# Sprint 91 技術決策記錄

## 決策列表

### D91-1: Pattern Matcher 架構設計

**決策**: 採用三層路由架構的第一層 - 規則式模式匹配

**選項**:
1. 純正則表達式匹配 (選擇)
2. 機器學習分類器
3. 關鍵字詞典匹配

**選擇**: 選項 1

**理由**:
- 高效率：延遲 < 10ms
- 可解釋性：規則清晰可審計
- 可維護性：規則以 YAML 配置
- 高置信度：精確匹配時置信度可達 0.95

---

### D91-2: 數據模型設計

**決策**: 使用 Python dataclass 定義核心模型

**選項**:
1. dataclass (選擇)
2. Pydantic BaseModel
3. TypedDict

**選擇**: 選項 1

**理由**:
- 輕量級：無外部依賴
- 類型安全：支持類型註解
- 內建功能：自動生成 `__init__`, `__repr__`
- 易於測試：簡潔的 API

---

### D91-3: 規則配置格式

**決策**: 使用 YAML 格式存儲規則

**選項**:
1. YAML (選擇)
2. JSON
3. TOML
4. Python dict

**選擇**: 選項 1

**理由**:
- 人類可讀性高
- 支持註釋
- 多行字符串處理佳
- PyYAML 成熟穩定

---

### D91-4: 意圖分類體系

**決策**: 採用 ITIL 標準的四大類別

**類別**:
1. **Incident** - 事件/故障報告
2. **Request** - 服務請求
3. **Change** - 變更請求
4. **Query** - 查詢/詢問

**理由**:
- 符合 ITIL 最佳實踐
- 覆蓋 IT 服務管理主要場景
- 易於擴展子類別

---

### D91-5: 審計日誌策略

**決策**: 結構化 JSON 日誌格式

**選項**:
1. JSON 結構化日誌 (選擇)
2. 純文本日誌
3. 資料庫記錄

**選擇**: 選項 1

**理由**:
- 易於分析和查詢
- 支持日誌聚合工具 (ELK, Splunk)
- 包含完整上下文信息
- 便於後續分析

---

**創建日期**: 2026-01-15
**更新日期**: 2026-01-15
