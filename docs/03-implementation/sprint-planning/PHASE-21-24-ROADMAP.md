# Phase 21-25 Roadmap: å®‰å…¨æ¶æ§‹èˆ‡ Claude è‡ªä¸»èƒ½åŠ›

**å»ºç«‹æ—¥æœŸ**: 2026-01-11
**é‡å¤§æ›´æ–°**: 2026-01-12 - æ–°å¢ Phase 21 æ²™ç®±å®‰å…¨æ¶æ§‹
**ç‹€æ…‹**: è¨ˆåŠƒä¸­
**å‰ç½®æ¢ä»¶**: Phase 20 å®Œæˆ âœ…

---

## Executive Summary

Phase 21-25 å°ˆæ³¨æ–¼å››å¤§æ ¸å¿ƒç›®æ¨™ï¼š
1. **ğŸ” æ²™ç®±å®‰å…¨æ¶æ§‹** - é€²ç¨‹éš”é›¢ç¢ºä¿ Agent åŸ·è¡Œå®‰å…¨ï¼ˆæ–°å¢ P0ï¼‰
2. **Claude è‡ªä¸»è¦åŠƒèƒ½åŠ›** - å¾ã€ŒTool åŸ·è¡Œè€…ã€å‡ç´šç‚ºã€Œè‡ªä¸»è¦åŠƒè€…ã€
3. **é•·æœŸè¨˜æ†¶èˆ‡å­¸ç¿’ç³»çµ±** - mem0 æ•´åˆå¯¦ç¾è·¨æœƒè©±å­¸ç¿’
4. **ç”Ÿæ…‹å®Œå–„èˆ‡æ“´å±•** - A2A é€šä¿¡ã€å‰ç«¯å®Œå–„ã€Kubernetes éƒ¨ç½²

---

## Roadmap Overview

```
Phase 20        Phase 21          Phase 22          Phase 23          Phase 24          Phase 25
   â†“                â†“                  â†“                 â†“                 â†“                 â†“
æ–‡ä»¶é™„ä»¶    â†’   ğŸ” æ²™ç®±å®‰å…¨    â†’   Claude è¦åŠƒ   â†’   å¤š Agent     â†’   å‰ç«¯å®Œå–„    â†’   Kubernetes
âœ… å·²å®Œæˆ       é€²ç¨‹éš”é›¢           + mem0           A2A é€šä¿¡          n8n æ•´åˆ         ç›£æ§
(34 pts)       (38 pts)           (50 pts)         (42 pts)          (38 pts)         (40 pts)
                  â†‘                   â†‘                â†‘
              ğŸ”´ æœ€é«˜å„ªå…ˆ         ğŸ”´ é«˜å„ªå…ˆ        ğŸŸ¡ ä¸­å„ªå…ˆ
              (å®‰å…¨åŸºç¤)         (æ ¸å¿ƒåŠŸèƒ½)       (å”ä½œå¢å¼·)
```

---

## Phase Summary

| Phase | åç¨± | Sprint ç¯„åœ | Story Points | å„ªå…ˆç´š | ç‹€æ…‹ |
|-------|------|-------------|--------------|--------|------|
| **21** | ğŸ” æ²™ç®±å®‰å…¨æ¶æ§‹ | S77-S78 | 38 pts | ğŸ”´ P0 æœ€é«˜ | è¨ˆåŠƒä¸­ |
| **22** | Claude è‡ªä¸»èƒ½åŠ›èˆ‡å­¸ç¿’ç³»çµ± | S79-S80 | 50 pts | ğŸ”´ P0 é«˜ | è¨ˆåŠƒä¸­ |
| **23** | å¤š Agent å”èª¿èˆ‡ä¸»å‹•å·¡æª¢ | S81-S82 | 42 pts | ğŸŸ¡ P1 ä¸­ | è¨ˆåŠƒä¸­ |
| **24** | å‰ç«¯å®Œå–„èˆ‡ç”Ÿæ…‹æ•´åˆ | S83-S84 | 38 pts | ğŸŸ¢ P2 ä½ | è¨ˆåŠƒä¸­ |
| **25** | ç”Ÿç”¢ç’°å¢ƒæ“´å±• | S85-S86 | 40 pts | ğŸ”µ P3 è¦–éœ€æ±‚ | è¨ˆåŠƒä¸­ |
| **Total** | | 10 Sprints | **208 pts** | | |

---

## Phase 21: æ²™ç®±å®‰å…¨æ¶æ§‹ (38 pts) ğŸ”´ P0 æœ€é«˜å„ªå…ˆ

### å®‰å…¨å•é¡ŒèƒŒæ™¯

| ç™¼ç¾ | é¢¨éšªç­‰ç´š | å½±éŸ¿ |
|------|----------|------|
| Claude Agent åœ¨ä¸»é€²ç¨‹åŸ·è¡Œ | ğŸ”´ é«˜ | å¯è¨ªå•ä¸»é€²ç¨‹ç’°å¢ƒè®Šé‡ã€æ•æ„Ÿè³‡æº |
| Hook ç³»çµ±å·²å¯¦ç¾ä½†æœªå•Ÿç”¨ | ğŸŸ¡ ä¸­ | å®‰å…¨æ©Ÿåˆ¶æœªç”Ÿæ•ˆ |
| Chat é é¢å¯è¨ªå•é …ç›®æºä»£ç¢¼ | ğŸ”´ é«˜ | æ½›åœ¨æ•¸æ“šæ´©éœ²é¢¨éšª |

### ç›®æ¨™

å»ºç«‹é€²ç¨‹éš”é›¢çš„å®‰å…¨åŸ·è¡Œç’°å¢ƒï¼Œç¢ºä¿ Agent ç„¡æ³•è¨ªå•ä¸»é€²ç¨‹æ•æ„Ÿè³‡æºã€‚

### æ¶æ§‹è¨­è¨ˆ

```
ä¿®æ”¹å‰ï¼šAPI â†’ Bridge â†’ ClaudeSDKClient â†’ Tools (åŒä¸€é€²ç¨‹)

ä¿®æ”¹å¾Œï¼š
API â†’ Bridge â†’ Orchestrator â†’ [Sandbox Process] â†’ ClaudeSDKClient â†’ Tools
                    â†‘                    â†‘
               (ä¸»é€²ç¨‹)              (éš”é›¢é€²ç¨‹)
               ä¿è­·æ•æ„Ÿè³‡æº          å—é™ç’°å¢ƒ
```

### Sprint è¦åŠƒ

| Sprint | åç¨± | Points | æ ¸å¿ƒåŠŸèƒ½ |
|--------|------|--------|---------|
| **S77** | SandboxOrchestrator + SandboxWorker | 21 pts | é€²ç¨‹èª¿åº¦ã€éš”é›¢åŸ·è¡Œ |
| **S78** | IPC é€šä¿¡ + ä»£ç¢¼é©é… + å®‰å…¨é©—è­‰ | 17 pts | JSON-RPCã€SSE è½‰ç™¼ã€å®‰å…¨æ¸¬è©¦ |

### æ ¸å¿ƒçµ„ä»¶

| çµ„ä»¶ | æ–‡ä»¶ | è·è²¬ |
|------|------|------|
| SandboxOrchestrator | `core/sandbox/orchestrator.py` | é€²ç¨‹èª¿åº¦å’Œç”Ÿå‘½é€±æœŸç®¡ç† |
| SandboxWorker | `core/sandbox/worker.py` | éš”é›¢å­é€²ç¨‹ä¸­åŸ·è¡Œ Claude Agent |
| IPCProtocol | `core/sandbox/ipc.py` | stdin/stdout JSON-RPC é€šä¿¡ |
| SandboxConfig | `core/sandbox/config.py` | æ²™ç®±ç’°å¢ƒé…ç½® |

### é©—è­‰æ¨™æº–

- [ ] Agent åŸ·è¡Œåœ¨ç¨ç«‹å­é€²ç¨‹ä¸­
- [ ] å­é€²ç¨‹ç„¡æ³•è¨ªå•ä¸»é€²ç¨‹ç’°å¢ƒè®Šé‡
- [ ] å­é€²ç¨‹åªèƒ½è¨ªå• /sandbox/{user_id}/ ç›®éŒ„
- [ ] SSE äº‹ä»¶æ­£ç¢ºè½‰ç™¼åˆ°å‰ç«¯
- [ ] æ€§èƒ½æè€— < 200msï¼ˆé¦–æ¬¡å•Ÿå‹•ï¼‰

### ä¾è³´é—œä¿‚

- Phase 20 å®Œæˆ (æ–‡ä»¶é™„ä»¶æ”¯æ´) âœ…
- ç¾æœ‰ Hook ç³»çµ± (åœ¨æ²™ç®±å…§ä½¿ç”¨)

---

## Phase 22: Claude è‡ªä¸»èƒ½åŠ›èˆ‡å­¸ç¿’ç³»çµ± (50 pts) ğŸ”´ P0 é«˜å„ªå…ˆ

### ç›®æ¨™

è®“ Claude å¾ã€ŒTool åŸ·è¡Œè€…ã€å‡ç´šç‚ºã€Œè‡ªä¸»è¦åŠƒè€…ã€ï¼Œå¯¦ç¾ã€Œåˆ†æ â†’ è¦åŠƒ â†’ åŸ·è¡Œ â†’ é©—è­‰ã€é–‰ç’°ã€‚

### Sprint è¦åŠƒ

| Sprint | åç¨± | Points | æ ¸å¿ƒåŠŸèƒ½ |
|--------|------|--------|---------|
| **S79** | Claude è‡ªä¸»è¦åŠƒå¼•æ“ + mem0 æ•´åˆ | 23 pts | Claude è‡ªä¸»è¦åŠƒã€mem0 SDK |
| **S80** | å­¸ç¿’ç³»çµ±èˆ‡æ™ºèƒ½å›é€€ | 27 pts | Few-shotã€Trial-and-Errorã€å¯©è¨ˆè¿½è¹¤ |

### æ ¸å¿ƒåŠŸèƒ½

#### 1. Claude è‡ªä¸»è¦åŠƒå¼•æ“ (S79-1, 13 pts)
```
äº‹ä»¶è¼¸å…¥ â†’ Claude åˆ†æ â†’ è‡ªä¸»è¦åŠƒæ­¥é©Ÿ â†’ åŸ·è¡Œ â†’ é©—è­‰çµæœ
                â†“
        Extended Thinking (å‹•æ…‹ budget_tokens)
```

#### 2. mem0 é•·æœŸè¨˜æ†¶æ•´åˆ (S79-2, 10 pts)
- å‘é‡å­˜å„²: Qdrant (æœ¬åœ°)
- åµŒå…¥æ¨¡å‹: OpenAI text-embedding-3-small
- è¨˜æ†¶ç¯„åœ: User/Session/Agent memory

#### 3. Few-shot å­¸ç¿’ç³»çµ± (S80-1, 8 pts)
#### 4. è‡ªä¸»æ±ºç­–å¯©è¨ˆè¿½è¹¤ (S80-2, 8 pts)
#### 5. Trial-and-Error æ™ºèƒ½å›é€€ (S80-3, 6 pts)
#### 6. Claude Session ç‹€æ…‹å¢å¼· (S80-4, 5 pts)

### ä¾è³´é—œä¿‚

- Phase 21 å®Œæˆ (æ²™ç®±å®‰å…¨æ¶æ§‹)
- Claude SDK åŸºç¤æ•´åˆ (Phase 12)

---

## Phase 23: å¤š Agent å”èª¿èˆ‡ä¸»å‹•å·¡æª¢ (42 pts) ğŸŸ¡ P1 ä¸­å„ªå…ˆ

### ç›®æ¨™

å¼·åŒ– Claude åœ¨å¤š Agent å”ä½œä¸­çš„è§’è‰²ï¼Œå¯¦ç¾ä¸»å‹•å¼ AI èƒ½åŠ›ã€‚

### Sprint è¦åŠƒ

| Sprint | åç¨± | Points | æ ¸å¿ƒåŠŸèƒ½ |
|--------|------|--------|---------|
| **S81** | Claude ä¸»å°çš„å¤š Agent å”èª¿ | 26 pts | A2A é€šä¿¡ã€Agent ç™¼ç¾ |
| **S82** | ä¸»å‹•å·¡æª¢èˆ‡æ™ºèƒ½é—œè¯ | 16 pts | ä¸»å‹•å·¡æª¢ã€æ ¹å› åˆ†æ |

### æ ¸å¿ƒåŠŸèƒ½

#### 1. Claude ä¸»å°çš„å¤š Agent å”èª¿ (S81-1, 10 pts)
#### 2. A2A é€šä¿¡å”è­°å®Œå–„ (S81-2, 8 pts)
#### 3. Claude + MAF æ·±åº¦èåˆ (S81-3, 8 pts)
#### 4. ä¸»å‹•å·¡æª¢æ¨¡å¼ (S82-1, 8 pts)
#### 5. æ™ºèƒ½é—œè¯èˆ‡æ ¹å› åˆ†æ (S82-2, 8 pts)

### ä¾è³´é—œä¿‚

- Phase 22 å®Œæˆ (Claude è‡ªä¸»è¦åŠƒ + mem0)
- MAF Adapters (Phase 3-6)

---

## Phase 24: å‰ç«¯å®Œå–„èˆ‡ç”Ÿæ…‹æ•´åˆ (38 pts) ğŸŸ¢ P2 ä½å„ªå…ˆ

### ç›®æ¨™

å®Œå–„å‰ç«¯ä»‹é¢åŠŸèƒ½ï¼Œæ“´å±•ç”Ÿæ…‹æ•´åˆèƒ½åŠ›ã€‚

### Sprint è¦åŠƒ

| Sprint | åç¨± | Points | æ ¸å¿ƒåŠŸèƒ½ |
|--------|------|--------|---------|
| **S83** | WorkflowViz èˆ‡ Dashboard | 18 pts | å¯¦æ™‚æ›´æ–°ã€è‡ªå®šç¾©å„€è¡¨æ¿ |
| **S84** | ç”Ÿæ…‹æ•´åˆèˆ‡å¯©æ‰¹æµç¨‹ | 20 pts | n8nã€å¤šç´šå¯©æ‰¹ã€é€šçŸ¥ |

### æ ¸å¿ƒåŠŸèƒ½

#### 1. WorkflowViz å¯¦æ™‚æ›´æ–° (S83-1, 10 pts)
#### 2. Dashboard è‡ªå®šç¾© (S83-2, 8 pts)
#### 3. n8n è§¸ç™¼æ•´åˆ (S84-1, 8 pts)
#### 4. å¤šç´šå¯©æ‰¹æµç¨‹ (S84-2, 5 pts)
#### 5. æ•ˆèƒ½ç›£æ§å¢å¼· (S84-3, 5 pts)
#### 6. çŸ­ä¿¡/éƒµä»¶é€šçŸ¥ (S84-4, 2 pts)

### ä¾è³´é—œä¿‚

- Phase 23 å®Œæˆ (å¤š Agent å”èª¿)
- å‰ç«¯åŸºç¤ (Phase 16-19)

---

## Phase 25: ç”Ÿç”¢ç’°å¢ƒæ“´å±• (40 pts) ğŸ”µ P3 è¦–éœ€æ±‚

### ç›®æ¨™

ç‚ºç”Ÿç”¢ç’°å¢ƒæº–å‚™ Kubernetes éƒ¨ç½²å’Œæ°´å¹³æ“´å±•èƒ½åŠ›ã€‚

### Sprint è¦åŠƒ

| Sprint | åç¨± | Points | æ ¸å¿ƒåŠŸèƒ½ |
|--------|------|--------|---------|
| **S85** | Worker å®¹å™¨åŒ–èˆ‡ K8s éƒ¨ç½² | 20 pts | Dockerã€Helmã€HPA |
| **S86** | ç›£æ§å¢å¼·èˆ‡ç½é›£æ¢å¾© | 20 pts | Prometheusã€Grafanaã€å‚™ä»½ |

### æ ¸å¿ƒåŠŸèƒ½

#### 1. Worker å®¹å™¨åŒ– + æ²™ç®±å¢å¼· (S85-1, 12 pts)
- å®¹å™¨ç´šæ²™ç®±å¢å¼·
- Dockerfile å„ªåŒ–

#### 2. Kubernetes éƒ¨ç½² (S85-2, 8 pts)
- Helm Chart é–‹ç™¼
- ConfigMap/Secret ç®¡ç†

#### 3. Prometheus + Grafana (S86-1, 10 pts)
- å®Œæ•´æŒ‡æ¨™æ”¶é›†
- è‡ªå®šç¾© Dashboard

#### 4. ç½é›£æ¢å¾© (S86-2, 10 pts)
- è‡ªå‹•å‚™ä»½ç­–ç•¥
- æ¢å¾©æµç¨‹æ¸¬è©¦

### ä¾è³´é—œä¿‚

- Phase 21-24 å®Œæˆ
- Azure Kubernetes Service (AKS)

---

## Technical Dependencies

### Phase 21 æŠ€è¡“æ£§
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Python subprocess | é€²ç¨‹éš”é›¢ |
| asyncio | ç•°æ­¥ IPC |
| JSON-RPC | é€²ç¨‹é€šä¿¡å”è­° |

### Phase 22 æŠ€è¡“æ£§
| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| mem0ai | 1.0.1+ | é•·æœŸè¨˜æ†¶ SDK |
| anthropic | latest | Claude API |
| qdrant-client | 1.x | å‘é‡å­˜å„² |

### Phase 23-25 æŠ€è¡“æ£§
(è©³è¦‹å„ Phase README)

---

## Risk Assessment

| é¢¨éšª | å½±éŸ¿ | å¯èƒ½æ€§ | ç·©è§£æªæ–½ |
|------|------|--------|---------|
| æ²™ç®±é€ƒé€¸ | ğŸ”´ é«˜ | ä½ | å¤šå±¤é˜²è­·ï¼Œå®šæœŸå®‰å…¨å¯©è¨ˆ |
| é€²ç¨‹å•Ÿå‹•å»¶é² | ä¸­ | ä¸­ | é€²ç¨‹æ± é ç†±ï¼Œè¤‡ç”¨é€²ç¨‹ |
| mem0 æˆæœ¬è¶…é ç®— | ä¸­ | ä¸­ | ä½¿ç”¨æœ¬åœ° Qdrant |
| K8s å­¸ç¿’æ›²ç·š | ä¸­ | é«˜ | App Service ä½œç‚ºå‚™é¸ |

---

## Success Metrics

### Phase 21 KPI
- é€²ç¨‹éš”é›¢æœ‰æ•ˆæ€§ 100%
- é¦–æ¬¡å•Ÿå‹•å»¶é² < 200ms
- å®‰å…¨æ¸¬è©¦é€šéç‡ 100%

### Phase 22 KPI
- Claude è‡ªä¸»è¦åŠƒæˆåŠŸç‡ > 80%
- mem0 è¨˜æ†¶æª¢ç´¢æº–ç¢ºç‡ > 80%

### Phase 23 KPI
- å¤š Agent å”èª¿æˆåŠŸç‡ > 90%
- ä¸»å‹•å·¡æª¢å•é¡Œç™¼ç¾ç‡ > 80%

### Phase 24-25 KPI
- å‰ç«¯æ€§èƒ½æŒ‡æ¨™é”æ¨™
- K8s å¯ç”¨æ€§ > 99.9%

---

## References

- [Phase 21 README](phase-21/README.md)
- [Phase 22 README](phase-22/README.md)
- [Phase 23 README](phase-23/README.md)
- [Phase 24 README](phase-24/README.md)
- [mem0 Documentation](https://docs.mem0.ai/)
- [Claude Extended Thinking](https://platform.claude.com/docs/)

---

**Last Updated**: 2026-01-12
**Total Story Points**: 208 pts (10 Sprints, 5 Phases)
