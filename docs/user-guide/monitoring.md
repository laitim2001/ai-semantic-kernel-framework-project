# ç›£æ§èˆ‡å‘Šè­¦

æœ¬æ–‡æª”ä»‹ç´¹ IPA Platform çš„ç›£æ§åŠŸèƒ½å’Œå‘Šè­¦é…ç½®ã€‚

---

## ç›®éŒ„

1. [ç›£æ§å„€è¡¨æ¿](#ç›£æ§å„€è¡¨æ¿)
2. [ç³»çµ±æŒ‡æ¨™](#ç³»çµ±æŒ‡æ¨™)
3. [å‘Šè­¦é…ç½®](#å‘Šè­¦é…ç½®)
4. [æ—¥èªŒç®¡ç†](#æ—¥èªŒç®¡ç†)
5. [æ•ˆèƒ½åˆ†æ](#æ•ˆèƒ½åˆ†æ)

---

## ç›£æ§å„€è¡¨æ¿

### æ¦‚è¦½é é¢

ç›£æ§å„€è¡¨æ¿æä¾›ç³»çµ±æ•´é«”ç‹€æ…‹çš„å³æ™‚è¦–åœ–ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»çµ±ç›£æ§å„€è¡¨æ¿                              æœ€å¾Œæ›´æ–°: 10:30 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ç³»çµ±ç‹€æ…‹: ğŸŸ¢ æ­£å¸¸                                           â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ API å¥åº·åº¦   â”‚ â”‚ åŸ·è¡ŒæˆåŠŸç‡   â”‚ â”‚ å¹³å‡éŸ¿æ‡‰æ™‚é–“ â”‚         â”‚
â”‚ â”‚    99.9%     â”‚ â”‚    98.5%     â”‚ â”‚    245ms     â”‚         â”‚
â”‚ â”‚    â–² 0.1%   â”‚ â”‚    â–¼ 0.5%   â”‚ â”‚    â–¼ 15ms   â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚ ä»Šæ—¥åŸ·è¡Œçµ±è¨ˆ                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ç¸½è¨ˆ: 1,234 | æˆåŠŸ: 1,215 | å¤±æ•—: 12 | é€²è¡Œä¸­: 7   â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚ åŸ·è¡Œè¶¨å‹¢ (24å°æ™‚)                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚  â–„â–„  â–„â–„â–„â–„  â–„â–„â–„â–„â–„â–„  â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„  â–„â–„â–„â–„â–„â–„  â–„â–„â–„â–„  â–„â–„   â”‚    â”‚
â”‚ â”‚ 00  04    08      12         16      20    24     â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é—œéµæŒ‡æ¨™å¡ç‰‡

| æŒ‡æ¨™ | èªªæ˜ | ç›®æ¨™å€¼ |
|------|------|--------|
| **API å¥åº·åº¦** | API å¯ç”¨æ€§ç™¾åˆ†æ¯” | â‰¥ 99.5% |
| **åŸ·è¡ŒæˆåŠŸç‡** | å·¥ä½œæµåŸ·è¡ŒæˆåŠŸç‡ | â‰¥ 95% |
| **å¹³å‡éŸ¿æ‡‰æ™‚é–“** | API P95 å»¶é² | < 500ms |
| **ä½‡åˆ—æ·±åº¦** | å¾…è™•ç†åŸ·è¡Œæ•¸é‡ | < 100 |
| **æ´»èºé€£æ¥æ•¸** | ç•¶å‰ WebSocket é€£æ¥ | - |

---

## ç³»çµ±æŒ‡æ¨™

### API æ•ˆèƒ½æŒ‡æ¨™

```yaml
ç«¯é»æ•ˆèƒ½:
  - endpoint: /api/v1/workflows
    avg_latency: 125ms
    p95_latency: 245ms
    p99_latency: 450ms
    requests_per_minute: 1,200
    error_rate: 0.1%

  - endpoint: /api/v1/executions
    avg_latency: 89ms
    p95_latency: 180ms
    p99_latency: 320ms
    requests_per_minute: 3,500
    error_rate: 0.05%
```

### å·¥ä½œæµåŸ·è¡ŒæŒ‡æ¨™

| æŒ‡æ¨™ | ç•¶å‰å€¼ | è¶¨å‹¢ |
|------|--------|------|
| **æ—¥åŸ·è¡Œæ¬¡æ•¸** | 1,234 | â–² 5% |
| **å¹³å‡åŸ·è¡Œæ™‚é–“** | 15.3s | â–¼ 2% |
| **æª¢æŸ¥é»ç­‰å¾…æ™‚é–“** | 4.2h | - |
| **é‡è©¦æ¬¡æ•¸** | 45 | â–¼ 10% |

### è³‡æºä½¿ç”¨æŒ‡æ¨™

```
CPU ä½¿ç”¨ç‡:    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 78%
è¨˜æ†¶é«”ä½¿ç”¨:    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 62%
ç£ç¢Ÿä½¿ç”¨:      [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘] 35%
Redis é€£æ¥:    [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘] 42/100
DB é€£æ¥æ± :     [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 58/100
```

### Agent æŒ‡æ¨™

| Agent | å‘¼å«æ¬¡æ•¸ | å¹³å‡è€—æ™‚ | Token ä½¿ç”¨ | æˆåŠŸç‡ |
|-------|----------|----------|------------|--------|
| Ticket Classifier | 523 | 2.1s | 45,000 | 99.2% |
| Customer Service | 312 | 3.5s | 78,000 | 98.7% |
| Report Generator | 89 | 8.2s | 125,000 | 97.8% |

---

## å‘Šè­¦é…ç½®

### é è¨­å‘Šè­¦è¦å‰‡

ç³»çµ±å…§å»ºä»¥ä¸‹å‘Šè­¦è¦å‰‡ï¼š

| è¦å‰‡åç¨± | æ¢ä»¶ | åš´é‡ç¨‹åº¦ | é€šçŸ¥æ–¹å¼ |
|----------|------|----------|----------|
| API éŒ¯èª¤ç‡é«˜ | éŒ¯èª¤ç‡ > 5% | ğŸ”´ åš´é‡ | Email, Teams |
| éŸ¿æ‡‰æ™‚é–“éé•· | P95 > 2s | ğŸŸ¡ è­¦å‘Š | Email |
| åŸ·è¡Œå¤±æ•—ç‡é«˜ | å¤±æ•—ç‡ > 10% | ğŸ”´ åš´é‡ | Email, Teams, SMS |
| ä½‡åˆ—å †ç© | æ·±åº¦ > 500 | ğŸŸ¡ è­¦å‘Š | Email |
| è³‡æºä½¿ç”¨é«˜ | CPU > 90% | ğŸŸ¡ è­¦å‘Š | Email |

### å‰µå»ºè‡ªå®šç¾©å‘Šè­¦

1. é€²å…¥ **ç›£æ§** â†’ **å‘Šè­¦è¦å‰‡**
2. é»æ“Š **+ æ–°å¢è¦å‰‡**
3. é…ç½®å‘Šè­¦æ¢ä»¶ï¼š

```yaml
rule_name: é«˜å„ªå…ˆç´šåŸ·è¡Œå¤±æ•—
description: é«˜å„ªå…ˆç´šå·¥ä½œæµåŸ·è¡Œå¤±æ•—æ™‚å‘Šè­¦

conditions:
  - metric: execution.status
    operator: equals
    value: FAILED
  - metric: execution.priority
    operator: equals
    value: high

duration: 1m  # æŒçºŒæ™‚é–“

actions:
  - type: email
    recipients:
      - oncall@example.com
      - manager@example.com
  - type: teams
    channel: "#alerts"
  - type: pagerduty
    service_key: "xxx"

cooldown: 15m  # å†·å»æ™‚é–“ï¼Œé¿å…é‡è¤‡å‘Šè­¦
```

### å‘Šè­¦é€šçŸ¥ç®¡é“

#### Email é€šçŸ¥

```yaml
channel:
  type: email
  config:
    smtp_server: smtp.example.com
    from: alerts@ipa-platform.com
    recipients:
      - team@example.com
```

#### Microsoft Teams

```yaml
channel:
  type: teams
  config:
    webhook_url: https://outlook.office.com/webhook/xxx
    card_format: adaptive  # ä½¿ç”¨ Adaptive Card
```

#### Slack

```yaml
channel:
  type: slack
  config:
    webhook_url: https://hooks.slack.com/services/xxx
    channel: "#ipa-alerts"
```

#### PagerDuty

```yaml
channel:
  type: pagerduty
  config:
    routing_key: "xxx"
    severity_mapping:
      critical: critical
      warning: warning
      info: info
```

### å‘Šè­¦éœé»˜

æš«æ™‚ç¦ç”¨å‘Šè­¦ï¼š

```yaml
silence:
  name: ç¶­è­·æ™‚æ®µéœé»˜
  start: "2025-11-26T22:00:00Z"
  end: "2025-11-27T06:00:00Z"
  matchers:
    - severity: warning
  comment: "è¨ˆåŠƒç¶­è­·æ™‚æ®µ"
  created_by: admin@example.com
```

---

## æ—¥èªŒç®¡ç†

### æ—¥èªŒç´šåˆ¥

| ç´šåˆ¥ | ç”¨é€” |
|------|------|
| `ERROR` | éŒ¯èª¤å’Œç•°å¸¸ |
| `WARN` | è­¦å‘Šè³‡è¨Š |
| `INFO` | ä¸€èˆ¬æ“ä½œè³‡è¨Š |
| `DEBUG` | åµéŒ¯è³‡è¨Š |
| `TRACE` | è©³ç´°è¿½è¹¤ |

### æ—¥èªŒæœç´¢

ä½¿ç”¨çµæ§‹åŒ–æŸ¥è©¢æœç´¢æ—¥èªŒï¼š

```
# æœç´¢èªæ³•
level:ERROR AND workflow_id:wf-abc123 AND timestamp:[2025-11-26 TO *]

# å¸¸ç”¨æŸ¥è©¢
- æ‰€æœ‰éŒ¯èª¤: level:ERROR
- ç‰¹å®šåŸ·è¡Œ: execution_id:exec-xyz
- ç‰¹å®šç”¨æˆ¶: user_id:user-123
- æ™‚é–“ç¯„åœ: timestamp:[2025-11-26T10:00 TO 2025-11-26T11:00]
```

### æ—¥èªŒä¿ç•™ç­–ç•¥

| æ—¥èªŒé¡å‹ | ä¿ç•™æœŸé™ | å­˜å„²ä½ç½® |
|----------|----------|----------|
| åŸ·è¡Œæ—¥èªŒ | 90 å¤© | Azure Blob |
| å¯©è¨ˆæ—¥èªŒ | 1 å¹´ | Azure Blob (å†·å­˜å„²) |
| ç³»çµ±æ—¥èªŒ | 30 å¤© | Azure Log Analytics |
| åµéŒ¯æ—¥èªŒ | 7 å¤© | æœ¬åœ° |

### æ—¥èªŒåŒ¯å‡º

```bash
# åŒ¯å‡ºç‰¹å®šåŸ·è¡Œçš„æ—¥èªŒ
GET /api/v1/executions/{execution_id}/logs/export

# åŒ¯å‡ºæ™‚é–“ç¯„åœå…§çš„æ—¥èªŒ
GET /api/v1/logs/export?start=2025-11-26&end=2025-11-27&level=ERROR
```

---

## æ•ˆèƒ½åˆ†æ

### åŸ·è¡Œæ•ˆèƒ½åˆ†æ

æŸ¥çœ‹å·¥ä½œæµåŸ·è¡Œçš„æ•ˆèƒ½ç“¶é ¸ï¼š

```
å·¥ä½œæµ: IT-Ticket-Classification
åŸ·è¡Œ ID: exec-abc123
ç¸½è€—æ™‚: 15.3s

ç¯€é»è€—æ™‚åˆ†æ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é–‹å§‹       â”‚ 0.1s  â”‚ â–ˆâ–ˆâ–ˆ                                  â”‚
â”‚ é©—è­‰       â”‚ 0.5s  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                             â”‚
â”‚ AI åˆ†æ    â”‚ 8.2s  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ âš ï¸
â”‚ æ›´æ–°ç¥¨æ“š   â”‚ 3.5s  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                  â”‚
â”‚ é€šçŸ¥       â”‚ 2.8s  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                      â”‚
â”‚ çµæŸ       â”‚ 0.2s  â”‚ â–ˆâ–ˆâ–ˆ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç“¶é ¸: AI åˆ†æç¯€é» (53.6% of total time)
å»ºè­°: è€ƒæ…®ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹æˆ–å„ªåŒ–æç¤ºè©
```

### è¶¨å‹¢åˆ†æ

```
åŸ·è¡Œæ™‚é–“è¶¨å‹¢ (éå» 7 å¤©)

16s â”‚                    â–„
14s â”‚              â–„â–„   â–„â–ˆ
12s â”‚         â–„â–„  â–„â–ˆâ–ˆâ–„ â–„â–ˆâ–ˆâ–„
10s â”‚    â–„â–„  â–„â–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–„â–ˆâ–ˆâ–ˆâ–ˆâ–„
 8s â”‚â–„â–„â–„â–„â–ˆâ–ˆâ–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„
 6s â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Mon Tue Wed Thu Fri Sat Sun

å¹³å‡: 12.3s | æœ€é«˜: 16.1s | æœ€ä½: 8.2s
è¶¨å‹¢: â–² 5% (ä¸Šå‡)
```

### å®¹é‡è¦åŠƒ

```yaml
ç•¶å‰å®¹é‡:
  daily_executions: 1,234
  peak_concurrent: 45
  avg_execution_time: 15.3s

å®¹é‡é™åˆ¶:
  max_concurrent: 100
  max_queue_depth: 1,000

é æ¸¬ (ä¸‹æœˆ):
  expected_daily: 1,850
  expected_peak: 68

å»ºè­°:
  - ç•¶å‰å®¹é‡å……è¶³
  - é è¨ˆä¸‹æœˆä½¿ç”¨ç‡é” 68%
  - å»ºè­°åœ¨é”åˆ° 80% æ™‚æ“´å®¹
```

---

## Grafana å„€è¡¨æ¿

### é é…ç½®å„€è¡¨æ¿

ç³»çµ±æä¾›ä»¥ä¸‹ Grafana å„€è¡¨æ¿ï¼š

1. **ç³»çµ±æ¦‚è¦½** - æ•´é«”ç³»çµ±å¥åº·ç‹€æ…‹
2. **API æ•ˆèƒ½** - API å»¶é²å’ŒéŒ¯èª¤ç‡
3. **åŸ·è¡Œç›£æ§** - å·¥ä½œæµåŸ·è¡Œçµ±è¨ˆ
4. **Agent æ•ˆèƒ½** - AI Agent ä½¿ç”¨çµ±è¨ˆ
5. **è³‡æºç›£æ§** - CPUã€è¨˜æ†¶é«”ã€ç£ç¢Ÿä½¿ç”¨

### è¨ªå• Grafana

```
URL: https://grafana.ipa-platform.com
é è¨­å¸³è™Ÿ: viewer / viewer123
```

### è‡ªå®šç¾©å„€è¡¨æ¿

å¯ä»¥ä½¿ç”¨ Prometheus æŒ‡æ¨™å‰µå»ºè‡ªå®šç¾©å„€è¡¨æ¿ï¼š

```promql
# åŸ·è¡ŒæˆåŠŸç‡
sum(rate(execution_completed_total[5m]))
/ sum(rate(execution_total[5m])) * 100

# API P95 å»¶é²
histogram_quantile(0.95,
  sum(rate(http_request_duration_seconds_bucket[5m])) by (le))

# æ´»èºå·¥ä½œæµæ•¸
count(workflow_status{status="active"})
```

---

## ä¸‹ä¸€æ­¥

- [æ•…éšœæ’é™¤æŒ‡å—](../admin-guide/troubleshooting.md) - å¸¸è¦‹å•é¡Œè§£æ±º
- [API æ–‡æª”](/api/openapi.yaml) - API åƒè€ƒ
- [ç®¡ç†å“¡æ‰‹å†Š](../admin-guide/configuration.md) - ç³»çµ±é…ç½®

---

*æœ€å¾Œæ›´æ–°: 2025-11-26*
