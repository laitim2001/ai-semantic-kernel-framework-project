# ============================================
# IPA Platform - Environment Variables Template
# ============================================
# 複製此文件為 .env 並填入實際值
# 注意: .env 文件已在 .gitignore 中，不會被提交

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
DB_NAME=ipa_platform
DB_USER=ipa_user
DB_PASSWORD=your_secure_password_here
DB_HOST=localhost
DB_PORT=5432

# ============================================
# Redis Cache Configuration
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here

# ============================================
# Message Queue Configuration
# ============================================
# 本地開發: 使用 RabbitMQ (推薦，零成本)
# 生產環境: 使用 Azure Service Bus
MESSAGE_QUEUE_TYPE=rabbitmq

# RabbitMQ (本地開發)
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest

# Azure Service Bus (生產環境 - 可選)
# 從 Azure Portal 獲取連接字符串
# Service Bus Namespace > Shared access policies > RootManageSharedAccessKey
AZURE_SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=your_key_here

# ============================================
# Authentication Configuration
# ============================================
# 本地開發: 使用 mock 模式 (推薦)
# 生產環境: 使用 Azure AD
AUTH_MODE=mock

# Mock Authentication (本地開發)
MOCK_USER_EMAIL=developer@example.com
MOCK_USER_NAME=Local Developer
MOCK_USER_ROLES=admin,user

# Azure AD OAuth 2.0 (生產環境 - 可選)
# 從 Azure Portal > Azure Active Directory > App registrations 獲取
AZURE_AD_TENANT_ID=your-tenant-id
AZURE_AD_CLIENT_ID=your-client-id
AZURE_AD_CLIENT_SECRET=your-client-secret
AZURE_AD_REDIRECT_URI=http://localhost:8000/auth/callback

# ============================================
# Logging and Monitoring Configuration
# ============================================
# 本地開發: 使用 console logging (推薦)
# 生產環境: 使用 Application Insights
LOGGING_MODE=console

# Application Insights (生產環境 - 可選)
# 從 Azure Portal > Application Insights > Properties 獲取
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-instrumentation-key;IngestionEndpoint=https://region.applicationinsights.azure.com/;LiveEndpoint=https://region.livediagnostics.monitor.azure.com/

# ============================================
# OpenAI / Azure OpenAI (Semantic Kernel)
# ============================================
# 選項 1: OpenAI
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002

# 選項 2: Azure OpenAI (推薦用於生產環境)
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_KEY=your-azure-openai-key
# AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
# AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# ============================================
# Application Settings
# ============================================
APP_ENV=development
LOG_LEVEL=DEBUG
API_PORT=8000

# CORS Settings
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# JWT Settings
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# Feature Flags (功能開關)
# ============================================
FEATURE_WORKFLOW_ENABLED=true
FEATURE_AGENT_ENABLED=true
FEATURE_TEMPLATE_ENABLED=true
FEATURE_METRICS_ENABLED=true

# ============================================
# Development Tools (僅用於開發環境)
# ============================================
# 是否啟用 API 文檔 (Swagger UI)
ENABLE_API_DOCS=true

# 是否啟用 SQL 查詢日誌
ENABLE_SQL_LOGGING=false

# 是否啟用 Mock 數據
ENABLE_MOCK_DATA=false

# ============================================
# Kong API Gateway Configuration
# ============================================
KONG_PG_PASSWORD=kong_password

# Kong JWT Configuration
KONG_JWT_KEY=ipa-jwt-key
KONG_JWT_SECRET=change-this-in-production
KONG_JWT_ALGORITHM=HS256
KONG_JWT_EXPIRY_HOURS=24

# ============================================
# Sprint 2: Integration Services
# ============================================

# n8n Webhook Integration (S2-1, S2-2)
N8N_WEBHOOK_SECRET=your-n8n-webhook-secret
N8N_BASE_URL=http://localhost:5678
N8N_ENABLED=true

# Microsoft Teams Notifications (S2-3, S2-4)
# 本地開發: 使用 mock 模式
# 生產環境: 使用實際 Teams Webhook URL
TEAMS_NOTIFICATION_ENABLED=true
TEAMS_MOCK_MODE=true
TEAMS_WEBHOOK_URL=mock://console

# 生產環境 Teams Webhook URL (從 Teams Incoming Webhook 獲取)
# TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/...

# Monitoring Integration (S2-5, S2-6)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
OPENTELEMETRY_ENABLED=true
OTEL_SERVICE_NAME=ipa-platform
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# Audit Logging (S2-7)
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90
