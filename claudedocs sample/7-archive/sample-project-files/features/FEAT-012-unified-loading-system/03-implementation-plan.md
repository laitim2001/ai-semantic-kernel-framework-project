# FEAT-012: 統一載入特效系統 - 實施計劃

> **建立日期**: 2025-12-16
> **狀態**: ✅ 已確認，待開發

---

## 1. 實施階段

### Phase 1: 核心組件開發

**目標**: 建立基礎載入組件

| 任務 | 預估時間 | 依賴 |
|------|----------|------|
| 1.1 建立 Spinner 組件 | 30 分鐘 | 無 |
| 1.2 建立 LoadingButton 組件 | 30 分鐘 | Spinner |
| 1.3 建立 LoadingOverlay 組件 | 30 分鐘 | Spinner |
| 1.4 建立 GlobalProgress 組件 | 1 小時 | 無 |
| 1.5 建立統一導出 index.ts | 15 分鐘 | 上述所有 |

**Phase 1 總計**: 約 2.5 小時

---

### Phase 2: 骨架屏組件開發

**目標**: 建立各類型骨架屏

| 任務 | 預估時間 | 依賴 |
|------|----------|------|
| 2.1 建立 CardSkeleton 組件 | 30 分鐘 | Skeleton (已有) |
| 2.2 建立 TableSkeleton 組件 | 30 分鐘 | Skeleton |
| 2.3 建立 FormSkeleton 組件 | 30 分鐘 | Skeleton |
| 2.4 建立 ListSkeleton 組件 | 20 分鐘 | Skeleton |
| 2.5 建立統一導出 index.ts | 10 分鐘 | 上述所有 |

**Phase 2 總計**: 約 2 小時

---

### Phase 3: 全局整合

**目標**: 將載入系統整合到應用

| 任務 | 預估時間 | 依賴 |
|------|----------|------|
| 3.1 修改 layout.tsx 整合 GlobalProgress | 30 分鐘 | GlobalProgress |
| 3.2 新增 I18N 翻譯鍵 | 20 分鐘 | 無 |
| 3.3 更新 components/ui/index.ts 導出 | 10 分鐘 | Phase 1, 2 |

**Phase 3 總計**: 約 1 小時

---

### Phase 4: 頁面整合（示範）

**目標**: 在關鍵頁面整合載入效果

| 任務 | 預估時間 | 依賴 |
|------|----------|------|
| 4.1 整合 Projects 列表頁 | 30 分鐘 | Phase 1-3 |
| 4.2 整合 OM Expenses 列表頁 | 30 分鐘 | Phase 1-3 |
| 4.3 整合表單提交按鈕 (通用) | 30 分鐘 | LoadingButton |
| 4.4 整合詳情頁載入 | 30 分鐘 | Phase 1-3 |

**Phase 4 總計**: 約 2 小時

---

### Phase 5: 測試與優化

**目標**: 確保品質和性能

| 任務 | 預估時間 | 依賴 |
|------|----------|------|
| 5.1 功能測試 | 30 分鐘 | Phase 1-4 |
| 5.2 視覺測試（Light/Dark Mode） | 20 分鐘 | Phase 1-4 |
| 5.3 性能測試 | 20 分鐘 | Phase 1-4 |
| 5.4 修復發現的問題 | 30 分鐘 | 上述測試 |

**Phase 5 總計**: 約 1.5 小時

---

## 2. 總時間估算

| Phase | 內容 | 預估時間 |
|-------|------|----------|
| Phase 1 | 核心組件開發 | 2.5 小時 |
| Phase 2 | 骨架屏組件開發 | 2 小時 |
| Phase 3 | 全局整合 | 1 小時 |
| Phase 4 | 頁面整合（示範） | 2 小時 |
| Phase 5 | 測試與優化 | 1.5 小時 |
| **總計** | | **9 小時** |

---

## 3. 實施順序

```
Phase 1 ─────────────────────────────────────────────────►
         │
         ├─► 1.1 Spinner
         │      │
         │      ├─► 1.2 LoadingButton
         │      │
         │      └─► 1.3 LoadingOverlay
         │
         └─► 1.4 GlobalProgress
                │
                └─► 1.5 index.ts
                       │
Phase 2 ───────────────┼─────────────────────────────────►
                       │
                       ├─► 2.1~2.4 Skeleton 組件
                       │
                       └─► 2.5 index.ts
                              │
Phase 3 ──────────────────────┼──────────────────────────►
                              │
                              ├─► 3.1 layout.tsx
                              │
                              ├─► 3.2 I18N
                              │
                              └─► 3.3 導出更新
                                     │
Phase 4 ───────────────────────────────┼─────────────────►
                                       │
                                       ├─► 4.1~4.4 頁面整合
                                       │
Phase 5 ───────────────────────────────────────────────────►
                                       │
                                       └─► 5.1~5.4 測試
```

---

## 4. 風險與緩解

| 風險 | 可能性 | 影響 | 緩解措施 |
|------|--------|------|----------|
| SSR 兼容問題 | 中 | 高 | 使用 'use client' 和動態導入 |
| 動畫性能問題 | 低 | 中 | 使用 CSS 動畫而非 JS |
| 記憶體洩漏 | 低 | 高 | 正確清理 useEffect |
| Dark Mode 顏色問題 | 中 | 低 | 使用 CSS 變數 |

---

## 5. 驗收檢查清單

### Phase 1 驗收
- [ ] Spinner 四種尺寸正確顯示
- [ ] LoadingButton 載入狀態正確
- [ ] LoadingOverlay 遮罩正確顯示
- [ ] GlobalProgress 路由切換觸發

### Phase 2 驗收
- [ ] CardSkeleton 佈局合理
- [ ] TableSkeleton 行列可配置
- [ ] FormSkeleton 欄位數可配置

### Phase 3 驗收
- [ ] 頁面跳轉顯示進度條
- [ ] I18N 中英文正確

### Phase 4 驗收
- [ ] 列表載入顯示骨架屏
- [ ] 表單提交按鈕載入狀態
- [ ] 詳情頁載入正確

### Phase 5 驗收
- [ ] Dark Mode 正確
- [ ] 無 console 錯誤
- [ ] 無性能問題

---

## 6. 後續擴展

完成本次實施後，可考慮：

1. **更多骨架屏類型**
   - DetailSkeleton（詳情頁骨架）
   - ChartSkeleton（圖表骨架）
   - DashboardSkeleton（儀表板骨架）

2. **進階功能**
   - 載入進度百分比顯示
   - 取消載入功能
   - 重試機制

3. **用戶體驗優化**
   - 載入動畫隨機化（避免視覺疲勞）
   - 預載入提示
