# 🏗️ 情況7: 架構審查 - 評估系統設計

> **使用時機**: 需要評估或改進系統架構時
> **目標**: 識別架構問題並提出改進建議
> **適用場景**: 架構決策、技術債務評估、系統優化

---

## 📋 Prompt 模板 (給開發人員)

```markdown
你好！我需要進行架構審查。

**審查範圍**: [要審查的模組/系統]

**審查重點**:
- [重點 1: 例如 性能/可擴展性]
- [重點 2: 例如 安全性]
- [重點 3: 例如 維護性]

**背景資訊**:
- [當前遇到的問題 (如有)]
- [預期的增長 (如有)]

請幫我：

1. 分析當前架構
   - 識別架構模式
   - 評估設計決策

2. 識別問題
   - 找出潛在的架構問題
   - 評估技術債務

3. 提出改進建議
   - 給出具體的改進方案
   - 評估改進的成本和收益

請用中文回答，提供詳細的分析報告。
```

---

## 🤖 AI 助手執行步驟

### Step 1: 了解當前架構 (3 分鐘)

```bash
# 1. 閱讀架構文檔
Read: CLAUDE.md
Read: backend/CLAUDE.md
Read: docs/02-architecture/technical-architecture.md (如有)

# 2. 掃描目錄結構
Bash: ls -la backend/src/
Bash: ls -la backend/src/domain/
Bash: ls -la backend/src/integrations/

# 3. 識別核心模組
Read: backend/src/api/v1/__init__.py
Read: backend/src/domain/__init__.py
```

### Step 2: 分析關鍵模組 (5 分鐘)

```bash
# 1. 分析 API 層
Glob: backend/src/api/v1/**/routes.py
Read: 選定的 routes.py 文件

# 2. 分析 Domain 層
Glob: backend/src/domain/**/service.py
Read: 選定的 service.py 文件

# 3. 分析 Integration 層
Glob: backend/src/integrations/**/*.py
Read: 選定的 adapter 文件

# 4. 檢查依賴關係
Grep: "from src." backend/src/ -r
```

### Step 3: 生成架構報告 (3 分鐘)

```markdown
# 🏗️ 架構審查報告

## 1. 架構概覽

### 1.1 整體架構
```
[架構圖 - 使用 ASCII 或描述]
```

### 1.2 關鍵模式
| 模式 | 位置 | 評價 |
|------|------|------|
| Repository Pattern | domain/ | ✅ 良好 |
| Adapter Pattern | integrations/ | ✅ 良好 |
| ... | ... | ... |

## 2. 強項分析
- ✅ [強項 1]
- ✅ [強項 2]

## 3. 問題識別

### 3.1 高優先級
| 問題 | 位置 | 影響 | 建議 |
|------|------|------|------|
| [問題描述] | file:line | [影響說明] | [建議] |

### 3.2 中優先級
| 問題 | 位置 | 影響 | 建議 |
|------|------|------|------|
| ... | ... | ... | ... |

### 3.3 低優先級 / 技術債
- [技術債 1]
- [技術債 2]

## 4. 改進建議

### 4.1 短期 (1-2 週)
1. [建議 1]
   - 工作量: X 天
   - 收益: [收益說明]

### 4.2 中期 (1-2 月)
1. [建議 1]
   - 工作量: X 週
   - 收益: [收益說明]

### 4.3 長期考慮
- [長期建議 1]
- [長期建議 2]

## 5. 總結
[總體評價和建議優先級]
```

---

## 📊 評估維度

### 設計原則
| 原則 | 評估項目 |
|------|----------|
| **SOLID** | 單一職責、開放封閉、依賴反轉 |
| **DRY** | 代碼重複、抽象程度 |
| **KISS** | 複雜度、可理解性 |

### 品質屬性
| 屬性 | 評估項目 |
|------|----------|
| **可維護性** | 代碼組織、文檔完整性 |
| **可擴展性** | 模組化、接口設計 |
| **可測試性** | 測試覆蓋、依賴注入 |
| **性能** | 效率、資源使用 |
| **安全性** | 輸入驗證、認證授權 |

---

## ✅ 驗收標準

AI 助手完成審查後應提供：

1. **架構概覽**
   - 清晰的架構描述
   - 識別使用的設計模式

2. **問題分析**
   - 識別潛在的架構問題
   - 按優先級分類

3. **改進建議**
   - 具體可行的改進方案
   - 成本收益分析

4. **總結報告**
   - 整體評價
   - 優先行動項目

---

## 🔗 相關文檔

### 開發流程指引
- [情況1: 專案入門](./SITUATION-1-PROJECT-ONBOARDING.md)
- [情況8: 代碼審查](./SITUATION-8-CODE-REVIEW.md)

### 架構參考
- `backend/CLAUDE.md` - 後端架構指南
- `backend/src/api/CLAUDE.md` - API 層設計
- `backend/src/domain/CLAUDE.md` - Domain 層設計

---

**維護者**: AI 助手 + 開發團隊
**最後更新**: 2025-12-24
**版本**: 2.0
