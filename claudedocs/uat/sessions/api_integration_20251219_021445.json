{
  "test_plan": "API Integration Test",
  "executed_at": "2025-12-19T02:14:42.467907",
  "completed_at": "2025-12-19T02:14:45.753276",
  "environment": {
    "base_url": "http://localhost:8000",
    "test_type": "HTTP API Integration"
  },
  "summary": {
    "total_tests": 20,
    "passed": 18,
    "failed": 2,
    "pass_rate": "90.0%",
    "total_duration_seconds": 3.29
  },
  "results": [
    {
      "test_id": 1,
      "test_name": "Create Agent",
      "phase": "Phase 1: Agents API",
      "method": "POST",
      "endpoint": "/api/v1/agents/",
      "status": "PASS",
      "http_status": 201,
      "duration_ms": 54.13,
      "response": {
        "id": "f3a66c10-e570-4b51-8d93-903bcbf17f3f",
        "name": "Test Agent 4f461a19",
        "description": "Integration test agent",
        "instructions": "You are a test assistant for integration testing.",
        "category": "testing",
        "tools": [],
        "model_config_data": {
          "max_tokens": 2000,
          "temperature": 0.7
        },
        "max_iterations": 10,
        "status": "active",
        "version": 1,
        "created_at": "2025-12-19T02:14:45.056317Z",
        "updated_at": "2025-12-19T02:14:45.056317Z"
      },
      "error": ""
    },
    {
      "test_id": 2,
      "test_name": "List Agents",
      "phase": "Phase 1: Agents API",
      "method": "GET",
      "endpoint": "/api/v1/agents/",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 27.81,
      "response": {
        "count": "N/A"
      },
      "error": ""
    },
    {
      "test_id": 3,
      "test_name": "Get Agent",
      "phase": "Phase 1: Agents API",
      "method": "GET",
      "endpoint": "/api/v1/agents/f3a66c10-e570-4b51-8d93-903bcbf17f3f",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 16.34,
      "response": {
        "id": "f3a66c10-e570-4b51-8d93-903bcbf17f3f",
        "name": "Test Agent 4f461a19",
        "description": "Integration test agent",
        "instructions": "You are a test assistant for integration testing.",
        "category": "testing",
        "tools": [],
        "model_config_data": {
          "max_tokens": 2000,
          "temperature": 0.7
        },
        "max_iterations": 10,
        "status": "active",
        "version": 1,
        "created_at": "2025-12-19T02:14:45.056317Z",
        "updated_at": "2025-12-19T02:14:45.056317Z"
      },
      "error": ""
    },
    {
      "test_id": 4,
      "test_name": "Update Agent",
      "phase": "Phase 1: Agents API",
      "method": "PUT",
      "endpoint": "/api/v1/agents/f3a66c10-e570-4b51-8d93-903bcbf17f3f",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 75.72,
      "response": {
        "id": "f3a66c10-e570-4b51-8d93-903bcbf17f3f",
        "name": "Test Agent 4f461a19",
        "description": "Updated agent description",
        "instructions": "You are a test assistant for integration testing.",
        "category": "testing",
        "tools": [],
        "model_config_data": {
          "max_tokens": 2000,
          "temperature": 0.7
        },
        "max_iterations": 10,
        "status": "active",
        "version": 2,
        "created_at": "2025-12-19T02:14:45.056317Z",
        "updated_at": "2025-12-19T02:14:45.260259Z"
      },
      "error": ""
    },
    {
      "test_id": 5,
      "test_name": "Create Workflow",
      "phase": "Phase 2: Workflows API",
      "method": "POST",
      "endpoint": "/api/v1/workflows/",
      "status": "PASS",
      "http_status": 201,
      "duration_ms": 58.38,
      "response": {
        "id": "946518eb-53ae-4b4d-895f-07197a173e86",
        "name": "Test Workflow 10e2612c",
        "description": "Integration test workflow",
        "trigger_type": "manual",
        "trigger_config": {},
        "graph_definition": {
          "edges": [
            {
              "label": null,
              "source": "start",
              "target": "process",
              "condition": null
            },
            {
              "label": null,
              "source": "process",
              "target": "end",
              "condition": null
            }
          ],
          "nodes": [
            {
              "id": "start",
              "name": "Start Node",
              "type": "start",
              "config": {},
              "agent_id": null,
              "position": null
            },
            {
              "id": "process",
              "name": "Process Node",
              "type": "agent",
              "config": {},
              "agent_id": "f3a66c10-e570-4b51-8d93-903bcbf17f3f",
              "position": null
            },
            {
              "id": "end",
              "name": "End Node",
              "type": "end",
              "config": {},
              "agent_id": null,
              "position": null
            }
          ],
          "variables": {}
        },
        "status": "draft",
        "version": 1,
        "created_by": null,
        "created_at": "2025-12-19T02:14:45.331945Z",
        "updated_at": "2025-12-19T02:14:45.331945Z"
      },
      "error": ""
    },
    {
      "test_id": 6,
      "test_name": "List Workflows",
      "phase": "Phase 2: Workflows API",
      "method": "GET",
      "endpoint": "/api/v1/workflows/",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 62.65,
      "response": {
        "count": "N/A"
      },
      "error": ""
    },
    {
      "test_id": 7,
      "test_name": "Get Workflow",
      "phase": "Phase 2: Workflows API",
      "method": "GET",
      "endpoint": "/api/v1/workflows/946518eb-53ae-4b4d-895f-07197a173e86",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 29.65,
      "response": {
        "id": "946518eb-53ae-4b4d-895f-07197a173e86",
        "name": "Test Workflow 10e2612c",
        "description": "Integration test workflow",
        "trigger_type": "manual",
        "trigger_config": {},
        "graph_definition": {
          "edges": [
            {
              "label": null,
              "source": "start",
              "target": "process",
              "condition": null
            },
            {
              "label": null,
              "source": "process",
              "target": "end",
              "condition": null
            }
          ],
          "nodes": [
            {
              "id": "start",
              "name": "Start Node",
              "type": "start",
              "config": {},
              "agent_id": null,
              "position": null
            },
            {
              "id": "process",
              "name": "Process Node",
              "type": "agent",
              "config": {},
              "agent_id": "f3a66c10-e570-4b51-8d93-903bcbf17f3f",
              "position": null
            },
            {
              "id": "end",
              "name": "End Node",
              "type": "end",
              "config": {},
              "agent_id": null,
              "position": null
            }
          ],
          "variables": {}
        },
        "status": "draft",
        "version": 1,
        "created_by": null,
        "created_at": "2025-12-19T02:14:45.331945Z",
        "updated_at": "2025-12-19T02:14:45.331945Z"
      },
      "error": ""
    },
    {
      "test_id": 8,
      "test_name": "Validate Workflow",
      "phase": "Phase 2: Workflows API",
      "method": "POST",
      "endpoint": "/api/v1/workflows/946518eb-53ae-4b4d-895f-07197a173e86/validate",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 21.01,
      "response": {
        "valid": true,
        "errors": [],
        "warnings": []
      },
      "error": ""
    },
    {
      "test_id": 9,
      "test_name": "Update Workflow",
      "phase": "Phase 2: Workflows API",
      "method": "PUT",
      "endpoint": "/api/v1/workflows/946518eb-53ae-4b4d-895f-07197a173e86",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 84.14,
      "response": {
        "id": "946518eb-53ae-4b4d-895f-07197a173e86",
        "name": "Test Workflow 10e2612c",
        "description": "Updated description",
        "trigger_type": "manual",
        "trigger_config": {},
        "graph_definition": {
          "edges": [
            {
              "label": null,
              "source": "start",
              "target": "process",
              "condition": null
            },
            {
              "label": null,
              "source": "process",
              "target": "end",
              "condition": null
            }
          ],
          "nodes": [
            {
              "id": "start",
              "name": "Start Node",
              "type": "start",
              "config": {},
              "agent_id": null,
              "position": null
            },
            {
              "id": "process",
              "name": "Process Node",
              "type": "agent",
              "config": {},
              "agent_id": "f3a66c10-e570-4b51-8d93-903bcbf17f3f",
              "position": null
            },
            {
              "id": "end",
              "name": "End Node",
              "type": "end",
              "config": {},
              "agent_id": null,
              "position": null
            }
          ],
          "variables": {}
        },
        "status": "draft",
        "version": 2,
        "created_by": null,
        "created_at": "2025-12-19T02:14:45.331945Z",
        "updated_at": "2025-12-19T02:14:45.501669Z"
      },
      "error": ""
    },
    {
      "test_id": 10,
      "test_name": "Create Checkpoint",
      "phase": "Phase 3: Checkpoints API",
      "method": "POST",
      "endpoint": "/api/v1/checkpoints/",
      "status": "FAIL",
      "http_status": 500,
      "duration_ms": 25.32,
      "response": {},
      "error": "{\"detail\":\"Failed to create checkpoint: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column \\\"checkpoint_type\\\" of relation \\\"checkpoints\\\" violates not-null constraint\\nDETAIL:  Failing row contains (be2d44c9-5677-4d57-b0e8-fb8cb0499436, a9385b79-2a26-44fc-aa85-b4d132a2edbf, 1, null, null, null, null, pending, null, null, null, null, 2025-12-19 02:14:45.584433+00, 2025-12-19 02:14:45.584433+00, approval_node, {\\\"reason\\\": \\\"Integration test checkpoint\\\", \\\"priority\\\": \\\"P1\\\"}, null, null, null, 2025-12-20 02:14:45.576757+00, Integration test checkpoint).\\n[SQL: INSERT INTO checkpoints (id, execution_id, node_id, step, status, payload, responded_by, responded_at, expires_at, notes) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::INTEGER, $5::VARCHAR, $6::JSONB, $7::UUID, $8::TIMESTAMP WITH TIME ZONE, $9::TIMESTAMP WITH TIME ZONE, $10::VARCHAR) RETURNING checkpoints.created_at, checkpoints.updated_at]\\n[parameters: (UUID('be2d44c9-5677-4d57-b0e8-fb8cb0499436'), UUID('a9385b79-2a26-44fc-aa85-b4d132a2edbf'), 'approval_node', 1, 'pending', '{\\\"priority\\\": \\\"P1\\\", \\\"reason\\\": \\\"Integration test checkpoint\\\"}', None, None, datetime.datetime(2025, 12, 20, 2, 14, 45, 576757), 'Integration test checkpoint')]\\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\"}"
    },
    {
      "test_id": 11,
      "test_name": "List Pending Checkpoints",
      "phase": "Phase 3: Checkpoints API",
      "method": "GET",
      "endpoint": "/api/v1/checkpoints/pending",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 33.05,
      "response": {
        "count": "N/A"
      },
      "error": ""
    },
    {
      "test_id": 12,
      "test_name": "Create Checkpoint for Rejection",
      "phase": "Phase 3: Checkpoints API",
      "method": "POST",
      "endpoint": "/api/v1/checkpoints/",
      "status": "FAIL",
      "http_status": 500,
      "duration_ms": 18.92,
      "response": {},
      "error": "{\"detail\":\"Failed to create checkpoint: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column \\\"checkpoint_type\\\" of relation \\\"checkpoints\\\" violates not-null constraint\\nDETAIL:  Failing row contains (2b99a71b-bb54-4dfd-990a-b2909457b7d4, 55bb5dc5-efac-452f-afe7-6f6d111b28e1, 2, null, null, null, null, pending, null, null, null, null, 2025-12-19 02:14:45.642524+00, 2025-12-19 02:14:45.642524+00, approval_node_2, {\\\"reason\\\": \\\"Test rejection\\\", \\\"priority\\\": \\\"P2\\\"}, null, null, null, 2025-12-20 02:14:45.636115+00, null).\\n[SQL: INSERT INTO checkpoints (id, execution_id, node_id, step, status, payload, responded_by, responded_at, expires_at, notes) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::INTEGER, $5::VARCHAR, $6::JSONB, $7::UUID, $8::TIMESTAMP WITH TIME ZONE, $9::TIMESTAMP WITH TIME ZONE, $10::VARCHAR) RETURNING checkpoints.created_at, checkpoints.updated_at]\\n[parameters: (UUID('2b99a71b-bb54-4dfd-990a-b2909457b7d4'), UUID('55bb5dc5-efac-452f-afe7-6f6d111b28e1'), 'approval_node_2', 2, 'pending', '{\\\"priority\\\": \\\"P2\\\", \\\"reason\\\": \\\"Test rejection\\\"}', None, None, datetime.datetime(2025, 12, 20, 2, 14, 45, 636115), None)]\\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\"}"
    },
    {
      "test_id": 13,
      "test_name": "Trigger Handoff",
      "phase": "Phase 4: Handoff API",
      "method": "POST",
      "endpoint": "/api/v1/handoff/trigger",
      "status": "PASS",
      "http_status": 201,
      "duration_ms": 6.54,
      "response": {
        "handoff_id": "a538aba1-1245-423f-832f-fbdd552bb4c3",
        "status": "initiated",
        "source_agent_id": "84368329-9d24-420f-bc6b-ddc829830ad1",
        "target_agent_id": "090ae439-eeb1-4a8b-9efa-24897b3de743",
        "initiated_at": "2025-12-19T02:14:45.655249",
        "message": "Handoff initiated successfully"
      },
      "error": ""
    },
    {
      "test_id": 14,
      "test_name": "Capability Matching",
      "phase": "Phase 4: Handoff API",
      "method": "POST",
      "endpoint": "/api/v1/handoff/capability/match",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 4.86,
      "response": {
        "matches": [],
        "total_candidates": 0,
        "strategy_used": "best_fit",
        "best_match": null
      },
      "error": ""
    },
    {
      "test_id": 15,
      "test_name": "Get Handoff History",
      "phase": "Phase 4: Handoff API",
      "method": "GET",
      "endpoint": "/api/v1/handoff/history",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 3.35,
      "response": {
        "count": "N/A"
      },
      "error": ""
    },
    {
      "test_id": 16,
      "test_name": "Route to Scenario",
      "phase": "Phase 5: Routing API",
      "method": "POST",
      "endpoint": "/api/v1/routing/route",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 2.1,
      "response": {
        "success": false,
        "source_execution_id": "67f600bd-b166-4a7c-85e0-f6cb961fb8be",
        "target_execution_id": null,
        "source_scenario": "it_operations",
        "target_scenario": "customer_service",
        "relation_id": null,
        "message": "No default workflow configured for customer_service",
        "workflow_id": null,
        "timestamp": "2025-12-19T02:14:45.668084"
      },
      "error": ""
    },
    {
      "test_id": 17,
      "test_name": "List Scenarios",
      "phase": "Phase 5: Routing API",
      "method": "GET",
      "endpoint": "/api/v1/routing/scenarios",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 1.99,
      "response": {
        "count": "N/A"
      },
      "error": ""
    },
    {
      "test_id": 18,
      "test_name": "Routing Health Check",
      "phase": "Phase 5: Routing API",
      "method": "GET",
      "endpoint": "/api/v1/routing/health",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 2.33,
      "response": {
        "service": "routing",
        "status": "healthy",
        "total_relations": 0,
        "configured_scenarios": 5,
        "configured_workflows": 0
      },
      "error": ""
    },
    {
      "test_id": 19,
      "test_name": "Create GroupChat",
      "phase": "Phase 6: GroupChat API",
      "method": "POST",
      "endpoint": "/api/v1/groupchat/",
      "status": "PASS",
      "http_status": 201,
      "duration_ms": 2.46,
      "response": {
        "group_id": "f51b366a-3ab7-4228-b34f-08e40dd01aa9",
        "name": "Test GroupChat bb087319",
        "description": "Integration test group chat",
        "status": "idle",
        "participants": [
          "Agent-f3a66c10",
          "Agent-agent_1d",
          "Agent-agent_0f"
        ],
        "message_count": 0,
        "current_round": 0,
        "created_at": "2025-12-19T02:14:45.675060",
        "updated_at": null
      },
      "error": ""
    },
    {
      "test_id": 20,
      "test_name": "List GroupChats",
      "phase": "Phase 6: GroupChat API",
      "method": "GET",
      "endpoint": "/api/v1/groupchat/",
      "status": "PASS",
      "http_status": 200,
      "duration_ms": 2.05,
      "response": {
        "count": 2
      },
      "error": ""
    }
  ]
}