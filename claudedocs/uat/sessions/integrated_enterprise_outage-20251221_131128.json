{
  "summary": {
    "total_features": 38,
    "main_list": {
      "total": 32,
      "passed": 31,
      "failed": 1,
      "pending": 0
    },
    "category_specific": {
      "total": 6,
      "passed": 5,
      "failed": 1,
      "pending": 0
    },
    "overall_pass_rate": "94.7%",
    "phases_completed": 11,
    "duration": "0:01:03.243954"
  },
  "phases": {
    "phase_1": "TestResult(test_id='phase_1', test_name='Event Trigger & Multi-Source Ticket Reception', status=<TestStatus.PASSED: 'passed'>, duration_ms=1122.7004528045654, message='Created 4 tickets, started workflow', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 10, 27, 85709))",
    "phase_2": "TestResult(test_id='phase_2', test_name='Intelligent Classification & Task Decomposition', status=<TestStatus.PASSED: 'passed'>, duration_ms=5734.391212463379, message='All tickets classified, tasks decomposed', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 10, 32, 820156))",
    "phase_3": "TestResult(test_id='phase_3', test_name='Cross-Scenario Routing', status=<TestStatus.PASSED: 'passed'>, duration_ms=2151.078939437866, message='All tickets routed with capability matching', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 10, 34, 971263))",
    "phase_4": "TestResult(test_id='phase_4', test_name='Parallel Branch Processing (Fan-out)', status=<TestStatus.PASSED: 'passed'>, duration_ms=1340.4943943023682, message='Created 3 parallel branches', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 10, 36, 311778))",
    "phase_5": "TestResult(test_id='phase_5', test_name='Recursive Root Cause Analysis (5 Whys)', status=<TestStatus.PASSED: 'passed'>, duration_ms=1897.6030349731445, message='Root cause: 遷移腳本缺少重建步驟', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 10, 38, 209401))",
    "phase_6": "TestResult(test_id='phase_6', test_name='Autonomous Decision + Trial-and-Error', status=<TestStatus.PASSED: 'passed'>, duration_ms=36664.45875167847, message='Issue resolved: Failover + reindex successful', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 14, 873879))",
    "phase_7": "TestResult(test_id='phase_7', test_name='Agent Handoff (A2A)', status=<TestStatus.PASSED: 'passed'>, duration_ms=535.5615615844727, message='Agent handoff completed with context preservation', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 15, 409468))",
    "phase_8": "TestResult(test_id='phase_8', test_name='Multi-Department Sub-workflow Approval', status=<TestStatus.PASSED: 'passed'>, duration_ms=3542.250394821167, message='All department approvals obtained', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 18, 951735))",
    "phase_9": "TestResult(test_id='phase_9', test_name='GroupChat Expert Consultation + Voting', status=<TestStatus.PASSED: 'passed'>, duration_ms=3318.2859420776367, message='Expert consensus: 5/5 approved', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 22, 270041))",
    "phase_10": "TestResult(test_id='phase_10', test_name='External System Sync (Fan-in)', status=<TestStatus.FAILED: 'failed'>, duration_ms=5040.631294250488, message='[STRICT MODE] API call failed: HTTP 404 for GET http://localhost:8000/api/v1/concurrent/b17b5834-324f-40f4-827a-9b60f67f2d2d/status', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 27, 310752))",
    "phase_11": "TestResult(test_id='phase_11', test_name='Completion & Record + Cache Verification', status=<TestStatus.PASSED: 'passed'>, duration_ms=570.0411796569824, message='Closed 4 tickets, audit recorded', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 27, 880878))",
    "phase_12": "TestResult(test_id='phase_12', test_name='Graceful Shutdown + Post-Incident Analysis', status=<TestStatus.PASSED: 'passed'>, duration_ms=589.911937713623, message='Graceful shutdown complete, post-incident report generated', details={}, timestamp=datetime.datetime(2025, 12, 21, 13, 11, 28, 470806))"
  },
  "main_features": {
    "1": {
      "name": "順序式 Agent 編排",
      "phase": "Phase 1",
      "status": "passed",
      "details": [
        "Agent exists: triage-agent (40a6ff8f-8902-46c6-8732-e03a004bd93e)",
        "Agent exists: analyst-agent (bc036f03-f74c-4ed3-aa1c-7867406ed1b4)",
        "Agent exists: resolver-agent (3bfa668b-d432-4a6a-be76-d31d0c70f866)",
        "Workflow created: b355eb11-cb80-4037-9e46-ea397940000b",
        "Execution started: b17b5834-324f-40f4-827a-9b60f67f2d2d"
      ],
      "error": null
    },
    "15": {
      "name": "Concurrent 並行執行",
      "phase": "Phase 1",
      "status": "passed",
      "details": [
        "Ticket IT-001 (IT): Created",
        "Ticket CS-001 (CS): Created",
        "Ticket FIN-001 (FIN): Created",
        "Ticket OPS-001 (OPS): Created",
        "Concurrent creation: 4 tickets in parallel"
      ],
      "error": null
    },
    "25": {
      "name": "Nested Workflows 嵌套工作流",
      "phase": "Phase 4",
      "status": "passed",
      "details": [
        "Nested workflow: technical_diagnosis",
        "Nested workflow: customer_notification",
        "Nested workflow: business_recovery"
      ],
      "error": null
    },
    "26": {
      "name": "Sub-workflow Execution",
      "phase": "Phase 8",
      "status": "passed",
      "details": [
        "Sub-workflow: it_manager_approval (IT Manager)",
        "Sub-workflow: cto_approval (CTO)",
        "Sub-workflow: ops_manager_approval (Ops Manager)"
      ],
      "error": null
    },
    "27": {
      "name": "Recursive Patterns",
      "phase": "Phase 5",
      "status": "passed",
      "details": [
        "Why 1: 為什麼資料庫無響應？",
        "  → 連接池耗盡",
        "Why 2: 為什麼連接池耗盡？",
        "  → 大量慢查詢佔用連接",
        "Why 3: 為什麼有大量慢查詢？",
        "  → 索引失效",
        "Why 4: 為什麼索引失效？",
        "  → 昨晚資料遷移後未重建",
        "Why 5: 為什麼未重建？",
        "  → 遷移腳本缺少重建步驟 [ROOT CAUSE]"
      ],
      "error": null
    },
    "50": {
      "name": "Termination 條件",
      "phase": "Phase 9",
      "status": "passed",
      "details": [
        "Termination type: Consensus reached",
        "Condition: All experts approved",
        "Session status: Closed"
      ],
      "error": null
    },
    "17": {
      "name": "Collaboration Protocol 協作協議",
      "phase": "Phase 7",
      "status": "passed",
      "details": [
        "triage_agent -> specialist_agent: REQUEST",
        "specialist_agent -> triage_agent: ACKNOWLEDGE",
        "specialist_agent -> triage_agent: RESPONSE",
        "Protocol completed: 3 messages exchanged"
      ],
      "error": null
    },
    "18": {
      "name": "GroupChat 群組聊天",
      "phase": "Phase 9",
      "status": "passed",
      "details": [
        "Session ID: 821fbfce-e955-49e2-a748-16f2b082f843",
        "Participants: 5 experts",
        "dba_expert: 索引已重建，查詢效能恢復正常...",
        "sre_expert: 監控顯示所有指標綠燈...",
        "devops_expert: 部署狀態穩定...",
        "app_expert: 應用程式回應時間正常...",
        "security_expert: 無安全漏洞引入..."
      ],
      "error": null
    },
    "19": {
      "name": "Agent Handoff 交接",
      "phase": "Phase 7",
      "status": "passed",
      "details": [
        "Handoff ID: eb30c825-6277-4638-97be-d2ba7b00c632",
        "Handoff policy: graceful",
        "Status: completed"
      ],
      "error": null
    },
    "28": {
      "name": "GroupChat 投票系統",
      "phase": "Phase 9",
      "status": "passed",
      "details": [
        "dba_expert: yes",
        "devops_expert: yes",
        "sre_expert: yes",
        "app_expert: yes",
        "security_expert: yes"
      ],
      "error": null
    },
    "31": {
      "name": "Context Transfer",
      "phase": "Phase 4",
      "status": "passed",
      "details": [
        "Context transferred to all branches",
        "Context keys: ['incident_id', 'root_ticket', 'correlation_chain', 'priority']"
      ],
      "error": null
    },
    "32": {
      "name": "Handoff Service",
      "phase": "Phase 7",
      "status": "passed",
      "details": [
        "Handoff service: Active",
        "Context preserved: Yes",
        "Agent state transferred: Yes"
      ],
      "error": null
    },
    "33": {
      "name": "GroupChat Orchestrator",
      "phase": "Phase 9",
      "status": "passed",
      "details": [
        "Orchestrator: Active",
        "Turn management: Round-robin"
      ],
      "error": null
    },
    "39": {
      "name": "Agent to Agent (A2A)",
      "phase": "Phase 7",
      "status": "passed",
      "details": [
        "A2A channel: Established",
        "Source: triage_agent",
        "Target: specialist_agent"
      ],
      "error": null
    },
    "48": {
      "name": "投票系統",
      "phase": "Phase 9",
      "status": "passed",
      "details": [
        "Voting completed: 5/5 approved",
        "Quorum reached: Yes (100% > 60%)",
        "Result: APPROVED"
      ],
      "error": null
    },
    "2": {
      "name": "人機協作檢查點",
      "phase": "Phase 8",
      "status": "passed",
      "details": [
        "Checkpoint: it_manager_approval",
        "Checkpoint: cto_approval",
        "Checkpoint: ops_manager_approval"
      ],
      "error": null
    },
    "29": {
      "name": "HITL Manage",
      "phase": "Phase 8",
      "status": "passed",
      "details": [
        "IT Manager: Approved",
        "CTO: Approved",
        "Ops Manager: Approved"
      ],
      "error": null
    },
    "49": {
      "name": "HITL 功能擴展",
      "phase": "Phase 8",
      "status": "passed",
      "details": [
        "Escalation policy: Configured",
        "Timeout escalation: To VP level after 5 min",
        "Complexity escalation: Enabled for P0 incidents",
        "Multi-approver support: Yes"
      ],
      "error": null
    },
    "22": {
      "name": "Dynamic Planning 動態規劃",
      "phase": "Phase 2",
      "status": "passed",
      "details": [
        "[REAL LLM] Classification using Phase 7 LLM Service",
        "IT-001: Database Outage (P1-Critical)",
        "CS-001: Authentication/Login Service Disruption (P1-Critical)",
        "FIN-001: Payment Processing Timeout (P1-Critical)",
        "OPS-001: Business Process Automation/Workflow Outage (P1-Critical)",
        "[AI] Correlation detected: Database primary node unresponsive causing downstream service failures (authentication, payment processing, and automated workflows)."
      ],
      "error": null
    },
    "23": {
      "name": "Autonomous Decision 自主決策",
      "phase": "Phase 6",
      "status": "passed",
      "details": [
        "[REAL LLM] Autonomous decision made by AI",
        "LLM reasoning: 事件為 critical 且影響 database/api/portal，需先快速恢復服務可用性並降低修復期間的進一步中斷風險。根因是遷移腳本缺少重建步驟，修復動作本質上需要補做重建索引/相關重建流程...",
        "Decision made: failover_and_reindex",
        "Confidence: 0.84",
        "Auto-approved: Yes (confidence >= threshold)"
      ],
      "error": null
    },
    "24": {
      "name": "Trial-and-Error 試錯",
      "phase": "Phase 6",
      "status": "passed",
      "details": [
        "[REAL LLM] Error learning active",
        "Analysis: 在故障修復過程中執行 REINDEX CONCURRENTLY，雖然其設計目標是降低阻塞，但仍需要在關鍵階段取得較高層級的鎖（例如在索引切換/驗證/清理階段需要...",
        "Recommendation: 替代方案建議：\n1) 優先避免在故障修復窗口執行 REINDEX CONCURRENTLY：將其移到業務低峰或修復完成後的維護窗口，並先終止/避免長交易（檢查 ...",
        "Trial 1: REINDEX CONCURRENTLY -> ❌",
        "Trial 2: Switch to standby -> ✅",
        "Trial 3: REINDEX on standby -> ✅"
      ],
      "error": null
    },
    "34": {
      "name": "Planning Adapter",
      "phase": "Phase 2",
      "status": "passed",
      "details": [
        "Tasks generated: 5",
        "  - 診斷資料庫連接狀態",
        "  - 通知受影響客戶",
        "  - 暫停財務交易處理",
        "  - 記錄營運流程狀態",
        "  - 準備備援方案"
      ],
      "error": null
    },
    "20": {
      "name": "Multi-turn 多輪對話",
      "phase": "Phase 5",
      "status": "passed",
      "details": [
        "Turn 1: Recorded",
        "Turn 2: Recorded",
        "Turn 3: Recorded",
        "Turn 4: Recorded",
        "Turn 5: Recorded"
      ],
      "error": null
    },
    "21": {
      "name": "Conversation Memory",
      "phase": "Phase 5",
      "status": "passed",
      "details": [
        "Messages in memory: 10",
        "Context preservation: Complete",
        "Root cause identified: 遷移腳本缺少重建步驟"
      ],
      "error": null
    },
    "3": {
      "name": "跨系統連接器",
      "phase": "Phase 10",
      "status": "failed",
      "details": [],
      "error": "[STRICT MODE] API call failed: HTTP 404 for GET http://localhost:8000/api/v1/concurrent/b17b5834-324f-40f4-827a-9b60f67f2d2d/status"
    },
    "4": {
      "name": "跨場景協作 (CS↔IT)",
      "phase": "Phase 3",
      "status": "passed",
      "details": [
        "IT-001 <-> CS-001: Linked (parent)",
        "IT-001 <-> FIN-001: Linked (references)",
        "IT-001 <-> OPS-001: Linked (child)",
        "Cross-scenario context sharing: Enabled"
      ],
      "error": null
    },
    "30": {
      "name": "Capability Matcher",
      "phase": "Phase 3",
      "status": "passed",
      "details": [
        "Agent dba_expert: score 0.95",
        "Agent network_specialist: score 0.88"
      ],
      "error": null
    },
    "43": {
      "name": "智能路由",
      "phase": "Phase 3",
      "status": "passed",
      "details": [
        "IT-001 -> customer_service: Routed",
        "CS-001 -> it_operations: Routed",
        "FIN-001 -> it_operations: Routed",
        "OPS-001 -> finance: Routed"
      ],
      "error": null
    },
    "47": {
      "name": "Agent 能力匹配器",
      "phase": "Phase 3",
      "status": "passed",
      "details": [
        "Capability: [database, sql, optimization]",
        "Capability: [networking, dns, routing]"
      ],
      "error": null
    },
    "14": {
      "name": "Redis 緩存",
      "phase": "Phase 1",
      "status": "passed",
      "details": [
        "Cache baseline: {'hits': 0, 'misses': 0, 'keys': 0}",
        "Cache hits: 0",
        "Cache misses: 0",
        "Hit rate: 0.0%"
      ],
      "error": null
    },
    "35": {
      "name": "Redis/Postgres Checkpoint",
      "phase": "Phase 8",
      "status": "passed",
      "details": [
        "Persisted: it_manager_approval",
        "Persisted: cto_approval",
        "Persisted: ops_manager_approval",
        "Final checkpoint: Saved",
        "Persistence: Redis + PostgreSQL",
        "Data integrity: Verified"
      ],
      "error": null
    },
    "10": {
      "name": "審計追蹤",
      "phase": "Phase 11",
      "status": "passed",
      "details": [
        "IT-001: COMPLETED",
        "CS-001: COMPLETED",
        "FIN-001: COMPLETED",
        "OPS-001: COMPLETED",
        "Audit trail: 0 entries found",
        "Execution ID: b17b5834-324f-40f4-827a-9b60f67f2d2d",
        "Tickets in scope: 4",
        "Post-incident report: Generated",
        "Root cause: 遷移腳本缺少索引重建步驟",
        "Prevention measures: 3"
      ],
      "error": null
    }
  },
  "category_features": {
    "B-2": {
      "name": "Parallel branch management",
      "phase": "Phase 4",
      "status": "passed",
      "details": [
        "Total branches: 3",
        "Branch management: Active"
      ],
      "error": null
    },
    "B-3": {
      "name": "Fan-out/Fan-in pattern",
      "phase": "Phase 4",
      "status": "passed",
      "details": [
        "Branch 1: technical_diagnosis created (simulated)",
        "Branch 2: customer_notification created (simulated)",
        "Branch 3: business_recovery created (simulated)"
      ],
      "error": null
    },
    "B-4": {
      "name": "Branch timeout handling",
      "phase": "Phase 6",
      "status": "passed",
      "details": [
        "Timeout policy: 30 seconds per operation",
        "Timeout action: Retry with fallback",
        "Timeout triggered: Trial 1 (lock contention)"
      ],
      "error": null
    },
    "B-5": {
      "name": "Error isolation in branches",
      "phase": "Phase 6",
      "status": "passed",
      "details": [
        "Error isolation: Enabled",
        "Trial 1 failure: Isolated, did not affect Trial 2/3",
        "Graceful degradation: Active"
      ],
      "error": null
    },
    "B-6": {
      "name": "Nested workflow context",
      "phase": "Phase 4",
      "status": "passed",
      "details": [
        "Context inherited: technical_diagnosis",
        "Context inherited: customer_notification",
        "Context inherited: business_recovery"
      ],
      "error": null
    },
    "C-4": {
      "name": "Message prioritization",
      "phase": "Phase 10",
      "status": "failed",
      "details": [],
      "error": "[STRICT MODE] API call failed: HTTP 404 for GET http://localhost:8000/api/v1/concurrent/b17b5834-324f-40f4-827a-9b60f67f2d2d/status"
    }
  },
  "api_call_stats": {
    "real": 58,
    "simulated": 0
  },
  "llm_stats": {
    "calls": 3,
    "successes": 3,
    "failures": 0,
    "tokens": 0
  },
  "llm_enabled": true,
  "strict_mode": true,
  "test_mode": "strict",
  "simulation_used": false
}